.container{"ng-controller" => "EditCreationCtrl", "ng-init" => "creation_id = #{@creation.id}; receiveChapters(); checkBadgesPending('author');"}
  .row
    .col-md-3
      = form_for(@creation) do |f|
        %h4 Creation title:
        = f.text_field :title, class: "form-control"
        %h4 Category:
        = f.text_field :category, class: "form-control"
        %h4 Tags:
        = f.text_field :tags, class: "form-control"
        %br/
        %br/
        .actions
          = f.submit "Save general information", class: "btn btn-success"
      %br/
      = link_to creation_path(@creation) do
        %button{:class => "btn btn-default"} Back to creation's overview

    .col-md-9
      .panel.panel-default
        .panel-heading
          %ul{:class => "nav nav-tabs"}
            %li{"ng-repeat" => "chapter in chapters", :role => "presentation"}
              %a{"ng-click" => "changeWorkingChapter(chapter.id)"}
                .panel.panel-primary
                  .panel-heading
                    {{chapter.id}}
            %li{:role => "presentation"}
              %a{:href => "#", "ng-click" => "addNewChapter()"}
                .panel.panel-success
                  .panel-heading
                    +
            %br/
        .panel-body
          %input{:input => "text", :class => "form-control", "ng-model" => "currentChapterTitle", :style => "margin-bottom: 5px;"}
          %textarea{:class => "form-control", :rows => "14", "ng-model" => "currentChapterText"}
          %i Use markdown to format the text.
          %br/
          %i
            You may get started with markdown
            %a{:href => "https://help.github.com/articles/basic-writing-and-formatting-syntax/"} here
          %span{:class => "pull-right"}
            %button{:class => "btn btn-success", :style => "margin-top: 5px;", "ng-if" => "currentChapterTitle != titleBeforeEditing || currentChapterText != textBeforeEditing", "ng-click" => "updateChapter()"}
              Update chapter!