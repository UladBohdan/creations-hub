.container{"ng-controller" => "CommentsCtrl", "ng-init" => "creation_id = #{@creation.id}; new_comment = ''; sendComment(false);"}
  .row
    .col-md-4
      .page-header
        %h1= @creation.title
      -# @creation.rating.times do
        %i{:class => "fa fa-star", :style => "color: gold; font-size: x-large;"}
      %br
      %br
      - if can?(:read, @creation) && @chapters.any?
        = link_to read_creation_path(@creation), target: "_blank" do
          = button_tag("Read", :type => "button", :class => "btn btn-primary")
      - if can? :edit, @creation
        = link_to edit_creation_url(@creation) do
          = button_tag("Edit", :type => "button", :class => "btn btn-primary")
      %br/
      %br/
      %h4
        Categories:
        = @creation.category
      %h4
        Created at:
        = @creation.created_at
      %h4
        Last modified at:
        = @creation.updated_at
      %br/
      .panel.panel-primary
        .panel-heading
          About author:
        .panel-body
          %h3= @author.name

    .col-md-8
      %h4 Chapters overview:
      %ul{:class => "nav nav-tabs"}
        - @chapters.each do |chapter|
          %li{:role => "presentation"}
            %a{:href => "#"}= chapter.title
      %br/
      .panel{:style => "height: 200px;"}
        ololo

      %h4 Opinions:
      %div{"ng-repeat" => "comment in comments"}
        .panel.panel-primary
          .panel-heading
            {{comment.user_id}} wrote at {{comment.created_at}} :
          .panel-body
            %h5 {{comment.text}}
            - if can? :destroy, Comment
              %h6 Remove

      - if can? :create, Comment
        %h4 You may leave your own opinion:
        %textarea{placeholder: "Your comment", class: "form-control", "ng-model": "new_comment"}
        %button{class: "btn btn-primary", style: "margin: 10px;", "ng-click": "sendComment(true)"}Post
